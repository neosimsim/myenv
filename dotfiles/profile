set -o vi
export TERM=xterm-256color
export LC_ALL=en_US.UTF-8
export ENV=~/.shinit
export HISTFILE=$HOME/.sh_history
export HISTSIZE=4096
export EDITOR=vim
export FCEDIT=$EDITOR
export MAILPATH=$MAIL:$HOME/.mail/posteo?"Neue Mails."
export TEXMFHOME=$HOME/texmf
export WORKSPACE=$HOME/src
export APPLICATIONS=$HOME/apps
export GOOS=linux
export GOARCH=amd64
export GOBIN="$HOME/bin"
export PLAN9="$HOME/apps/plan9port"
export tabstop=4
export BROWSER=chrome
export NAMESPACE=$HOME/9p
export PS1="$USER@`hostname`\$ "
export CDPATH=".:$HOME:$HOME/src"
# font for plan9 sam, 9term etc. (not acme)
export font=/mnt/font/DejaVuSansMono/18a/font
export FZF_DEFAULT_COMMAND="set -o pipefail; command find -L . -mindepth 1 -path '*/\.*' -prune -o -type f -print -o -type l -print | cut -b3-" fzf

pushToPath() {
	case "$1" in
	'')
		;;
	*)
		PATH=`
			echo "$PATH" |
			sed '
				s,^'$1':,,g
				s,:'$1':,:,g
				s,:'$1'$,,g
			'
		`
		PATH="$1:$PATH"
		export PATH
		;;
	esac
}

pushToPath $APPLICATIONS/android-sdk-linux/platform-tools
pushToPath $APPLICATIONS/android-sdk-linux/tools
pushToPath $APPLICATIONS/postgresql/bin
pushToPath $APPLICATIONS/go/bin
pushToPath $HOME/.local/bin
pushToPath $HOME/.npm/bin
pushToPath $HOME/.cabal/bin
pushToPath $HOME/bin
pushToPath $HOME/bin/aliases

if ! (echo $PATH | grep -q "/usr/games"); then
	PATH=$PATH:/usr/games
fi
export PATH
. $PLAN9/bin/u

export MANPATH=$HOME/man:

alias ll='ls -l'
alias l='ls -1'
alias my_rsync='rsync -rlHtu --include-from=$HOME/.rsync_include --exclude-from=$HOME/.rsync_exclude'
alias cmatrix='cmatrix -b -u 6'
alias rm='rm -i'
alias mv='mv -i'
alias tmux-sp='tmux split-window -c $PWD'
alias Watch='Watch -x \\.git'
# workaround for haskell, due to w^x on OpenBSD
#alias cabal='env TMPDIR=/usr/local/cabal/build/ cabal'

[ -f ~/.ssh-agent-thing ] && . ~/.ssh-agent-thing > /dev/null
if ! [ -e "$SSH_AUTH_SOCK" ]
then
	ssh-agent > ~/.ssh-agent-thing
	. ~/.ssh-agent-thing
fi

if [ -e "$HOME/.nix-profile/etc/profile.d/nix.sh" ]
then
	source "$HOME/.nix-profile/etc/profile.d/nix.sh"
	export LOCALE_ARCHIVE=/usr/lib/locale/locale-archive
	# workaround for nix https://github.com/NixOS/nix/issues/599
	#export LOCALE_ARCHIVE=/usr/lib/locale/locale-archive
	# https://github.com/NixOS/nix/issues/599
	#export LOCALE_ARCHIVE="$(nix-env --installed --no-name --out-path --query glibc-locales)/lib/locale/locale-archive"
fi

if [ -e "$HOME/.profile.local" ]
then
	. "$HOME/.profile.local"
fi
